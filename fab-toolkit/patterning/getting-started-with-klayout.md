# Getting started with Klayout

1. Download Klayout from their websites and follow the instructions to install the software
2. After it is successfully installed, open the Klayout editor

![](https://lh7-us.googleusercontent.com/6uIq3AP-Oo5mmkAPriT8gRXiQg3HzqyUHye7cURPcK_733SF49vJvGOysMyaGEw4oTeMPDOuQXJJQLYHH-uw-QO8pB8-bWOFQo4IsUjySK192xua2-OMgUI5yshKJ1vORMkxKaNeqVhuEavx0s-Ofsk)

3. To create a new layout File>>New Layout

![](https://lh7-us.googleusercontent.com/fQlw-0QUX17cuGtHf1HLH1xpM-xlt23sTMwit69Oqrr1fA0ffezTu23XSLHHoyQMhxjWYU3PtI94guwgkrcQhyMR9NZjWzVTJix3jViKokGU3SjKgiuo02Zt50k2vdxRF_gGs3AnaH_kltcXCbj1-Gw)

4. Set the initial layer(s) that you need. The current hacker fab process would require 5 layers which are substrate, poly, active, contact, and aluminum. This is just for getting started, you can always add new layers later if you need to do so.

![](https://lh7-us.googleusercontent.com/Pmvdjf-WT3Pj552PX49Pp6ShQYHw64u0_Yv-OSdDCqZNDdVxncDu9HyK0cEjtJX4egDDdRQk3shIs3wplpws1rbV5nBmcr3AuA3s-3aCuBTjDvK2WGJupIIKufQGK6G6FhH3MDJRj0BXNi6eMhH3SSA)

The layers will be shown in the upper right corner.&#x20;

![](https://lh7-us.googleusercontent.com/rcUJgFUBeIUrZF1eCANGl_m90ixrkKkWTZ2012HT5ehRBrQY4T_G_wQBdyRhbc0yeDSqWFirpqeWBL8oFY-2jot5tEHZM8jXkIfv_V8betIEGSqndL02LwE8C616Rkd3JSdfYKUIv8G3fOXxC-pCy70)

5. Go to View>>Layer Toolbox to open the layer toolbox so that you can adjust the order of the layers and the texture of the layers based on your preference.

![](https://lh7-us.googleusercontent.com/INMtcES51Utxka226KUXkw3VDaDuLaC_3sl0dON-Nbzw4mhOIhVl9q343qqvniItRR14J7btsUVWjljXaMMdMIrMpGdsfvWYSfOFZdO0U02VyHegaXxb-VxuidHcUH2ZFV1jxHXFg01C8yHil38FeYc)![](https://lh7-us.googleusercontent.com/OFuaTvibqjiTDKqWijnUR124KKNsrL7rKAtSNqcmxbFo6SBiPNF4M9BENkt7qTYAhUynFwMWgq-GVKzxFGL1YRLAv5WaltbaMctj76FRE_b-yz3jL9MvIMF0gijv6ghKoGT2nAYTwYNI1BWQCYrmPVw)

<br>

Double-click the layer to hide it. If you are drawing on a hidden layer, the following tip will show up.

![](https://lh7-us.googleusercontent.com/uVjquMldlC_yTsWZgs-6b-FffLgy46GKOV0q5NUej7hp49rfJEaXs9q_zEQj70FIhg6kPHvR3NHL1sZVGVklSPrF-UDYEhhW3gkuxEMuVfz5wqaP-KvzmhRSDfYpC9lfuzsqcOELqJxst7mJaCJf6DA)

6. To create a new layer, go to Edit>>Layer>>New Layer

![](https://lh7-us.googleusercontent.com/hQg99qsAohM53eZT-b5ZG8Gknt_fJ2D5ENJJ9zHNMUGCq7PLQqpE2X-y8eTwJK3jHWoGkgZpPPMroKm4N6YZZ74DeXQ6oVbFGqX-MNdieTRuBm_7QLbNogDuwzReFGH8ocujDZim0xQmr7ONxycUksc)

7. Scroll your mouse to adjust the size of the grid

![](https://lh7-us.googleusercontent.com/eEyHLdFhOTktvBDrh1kp0t-pQ1fHpwTLNylnwHvNME2zTF2-wl338tHYnbbJHOIzyZDgN5pioNjdHPfzeRz3UZSFhTO6QZH6U_ZlikTi_lwzZBe8f0YAhkWKmDwGp29k9_mzfcO6yR2Q6LGWdlxAS9I)

The grid can also be hidden through View>>Show Grid. When you need to export the masks as screenshots, the mask needs to be hidden.

![](https://lh7-us.googleusercontent.com/NpiCYY7Asf6F6bHoOlpflTIcEGIiq9hkS5M82EMLao_78MhafjpoXLX2yh2UCECcMcxRgNVyZV7lv0aJtgzPEPJt5AysSXseh45P9XfHV7UKrv-PhymBf3ZqMxMSKNeSwqE_dQBo88C28_1HiC5-Vss)

8. Klayout has the following tools to draw the shapes. Press “shift” to draw straight lines.

![](https://lh7-us.googleusercontent.com/4y6CUBfkApxKMri6lL3IieLI2Y78P_PVlOWToxqzda0nNR_e7b2fomZafsMXmxKNtwPKiuz30SiW8o5m10lbWlc6ORjuEda1JXbJ6Qeg7881TqP7B9ikc6B4PHevF4LSy4ajbwysn6hgqpt-5M220rU)

9. Draw the rough shape of an object then adjust it to be the exact size by pressing “Q” to edit its property.

![](https://lh7-us.googleusercontent.com/9cNp3PTRRvWSSzn82Wg3Lpv0__QfTf_A9MZl0DRM6KefND3AgZu-5gOHF4A-Nrrk5F6AfN1HEfCUlycmbuvQQ_CJVsyPCi6NKmMNeYLGknC1J7FTvdu4fDj19tf7DBvo7cSIm_HSIDqOsD25gqp-uPU)

10. Mask Exporting (method 1):
    1. Go to Display>>Zoom Fit to maximize the size of the mask on the screenshot

![](https://lh7-us.googleusercontent.com/dA8x-aCVnOUDKwQnZwRi-d56G41wDZO2ErA1Iok2ptJYRCCjlWp492pDeuPWb_4TLE0JMrD86vApImrwu3fOBS0CYEgYJaBBqnaQjzTXaoT-yvY4LzSogrb6-KZ5PUYBHpt9jlusnVQx_lC48xc7CQs)

2. Rename and sort the order of the layers according to the order of the fabrication steps. In this case, the easiest way is to sort them by name (0:substrate, 1:poly gate, 2:active layer, 3:contact hole, 4:aluminum)

![](https://lh7-us.googleusercontent.com/mlpcmLxoty5ofSMeX3uIxCblmeW9EjsVm7P9dL9y6vI-HNUU4Epuw4VCyUbrmoPi_-sukWK3XdrSOg-geEQqoEm4oqX4uSEllyNUuJuGHHymhndNl4XYxj1lUuR8246rHBjS0N0_cZioVP3czQhOipU)![](https://lh7-us.googleusercontent.com/1_d46_bWUN7o8Rbe6djO9fzk9Mqvfvu-5B5UUjf6EIlRpTXUvL4Lte74uJJ6v93WRS21lPWJ1Z2VYiaZGcQ68QUukN6KSIaQlXzU-26ZFzg2_kmPBVqsLzFUR2MNno1O9WedWz6ihkXBTmxoSKW8Mt0)

3. To make the masks compatible with the lithography stepper, adjust the size of the substrate layer (layer 0 in this case) to be proportional to its resolution (3840x2160). In this set of masks, the size of the substrate layer is set to be 384x216. Under this setting, the actual size of the pattern coming from the stepper is 2.5 times the designed size.
4. Adjust the color and texture of the mask to be blue/red/black accordingly to make them compatible with the red focusing and UV focusing.

![](https://lh7-us.googleusercontent.com/V0MKQ8K3KnoYqGiGiwfrwhi3iq8lRd1nSjPZAnxE3GWPI4OJ_UpPSplZ6ZG33zpUpAnZVzoaZPcFOYLKbSiCTq3Q0sjDzbuj5feUTHGPfaDePDxrKl1zTAHVpFDjtGTshmAzFKclphViCk_PGWucJs0)

5. Hide or show certain layers based on the property of the mask and take screenshots via File>>Screenshot and save the mask.&#x20;
6. Corp the screenshots since the exported screenshot would normally have white sides.
7. See step 11 for an alternative way of exporting the masks using Python scripts![](https://lh7-us.googleusercontent.com/-ePWQcP0kutwetU0Ce8hUAjPkSSMTEsfEPWduK6fCMQq7KUBM8Ml0dddR8BmjucGYauml7h7RiIworvM4o3EPHkmdOjcBpQyLIdYFFe4AzW2EgKIpEeRwU2CWJQxpMPBTtXANME6-ZSg81m-qF21dwI)



11. Mask Exporting (method 2):
    1. Set up steps are the same as Step 10 a. to c. steps.
    2. Go to Macros>>Macro Development to write Maros in Klayout

![](https://lh7-us.googleusercontent.com/Pd_EI9SNdLxUzUu95jrMmPPHVcsvSIK0SlJoG6VdveA2-PjM1Bi-GWe4PRIajh3ZWQbYgSCY0PtLLpTbCkvepdg0qBp9OS1HcKMonD0Gak253SGursXbKumxnM_zmqO0DxZM0J972yaVe6CBpAkn_Xc)

3. Select “Python” and change the Macro Template to “Plain Python file”

![](https://lh7-us.googleusercontent.com/Iqv6j2SUb3wTSX8MgvopJTCFC0QIdmf2l4sXbVzfm1jzJR9Dm-mdzlLVmyzSKE5NJLli5-1TTFthWDYEsmiD3vejbOLV5gl--wHRqM36h-qpHYEVl7dqXGVWBnZRUKe5IyZEzhItxkkJQHIixbSmdss)

4. Paste the following code into the Python file you just created. 1

```
lv = pya.LayoutView.current()
ly = pya.CellView.active().layout()


# top cell bounding box in micrometer units
bbox = ly.top_cell().dbbox()


# compute an image size having the same aspect ratio than 
# the bounding box
w = 3840
h = int(0.5 + w * bbox.height() / bbox.width())


lv.save_image_with_options('/your_directory/your_picture_name.png', w, h, 0, 0, 0, bbox, True)
```

5. Change the path to the folder where you want your images to be saved. Note that if the name of your folder or file starts with a number, it will give you the following error message.

![](https://lh7-us.googleusercontent.com/nOQIWF5qhEj2-w_U-gpQkbBRKorL1TuJ4dEM9NdgAxtmscpxn64rHAq_9HmA8kcAhI4PNy3yVbbkXoBQt0VesdM0mkRr53iTk3qPIMz_vNmnTjSsLqztcaVoZ3iYM9K7LqXbyHemPiOc1SsUIJVD388)

6. The .png file of your mask will be saved in black and white. Be sure to adjust the color and texture of the mask to be blue/red/black accordingly to make them compatible with the red focusing and UV focusing.

<img src="https://lh7-us.googleusercontent.com/ZLgsLWgg9FxfOM2H_KE9MUyaK_x44EdDbpEbg4mkNbUh-xwWtFcRSgnM0xh_knJE10vpxvrO9k2CDO-h37TIIqVFut0NCnrnc58-UiUN1M1DwxSBKQbsDCMIhOBZWVWU-Nfa5A_r8TZzpS8_PqYHA3k" alt="" data-size="original">

Reference:

1 GDS to image  [https://www.klayout.de/doc-qt5/programming/python.html](https://www.klayout.de/doc-qt5/programming/python.html)



Appendix 1. Klayout user guides

Klayout user manual from their websites:

[https://www.klayout.de/doc/manual/basic.html](https://www.klayout.de/doc/manual/basic.html)



Shorter one for getting started with basic functions:

[https://mycourses.aalto.fi/pluginfile.php/897248/mod\_resource/content/2/KLayout%20Guide.pdf](https://mycourses.aalto.fi/pluginfile.php/897248/mod_resource/content/2/KLayout%20Guide.pdf)<br>

Appendix 2. Masks for an NMOS enhancement load inverter

<div><figure><img src="../../.gitbook/assets/blue1.png" alt=""><figcaption></figcaption></figure> <figure><img src="../../.gitbook/assets/blue2.png" alt=""><figcaption></figcaption></figure> <figure><img src="../../.gitbook/assets/blue3.png" alt=""><figcaption></figcaption></figure> <figure><img src="../../.gitbook/assets/blue4.png" alt=""><figcaption></figcaption></figure> <figure><img src="../../.gitbook/assets/red11.png" alt=""><figcaption></figcaption></figure></div>

<br>
